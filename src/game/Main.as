package game {	import flash.display.Bitmap;	import flash.display.BitmapData;	import flash.display.Sprite;	import flash.events.Event;	import flash.events.KeyboardEvent;	import flash.ui.Keyboard;	import flash.ui.KeyboardType;	import flash.utils.getTimer;	import game.core.BoxRegion;	import game.core.Skin;	import game.core.SkinBox;	import game.physics.PhyBody;	/**	 * ...	 * @author Mike email:542540443@qq.com	 */	public class Main extends Sprite	{		private var _list:Array;		private var _self:PhyBody;		private const speed:int = 2;				public function Main() 		{			stage?init():addEventListener(Event.ADDED_TO_STAGE, init);		}				private function init(e:Event = null):void		{			//			createList();			//			var spt:BoxRegion = new BoxRegion(new Skin(new BitmapData(10, 10, true, 0xffff0000)));			spt.x = 500;			spt.y = 200;			this.addChild(spt);			_self = new PhyBody(spt);			//			setRunning();		}					private function createList():void		{			_list = new Array;			var ran:int = Math.random() * 400 | 0;			for (var i:int = 0; i < 100; i++)			{				var color:uint = 0xff000000;				if (ran == i) {					color = 0xffff0000;				}				var spt:BoxRegion = new BoxRegion(new Skin(new BitmapData(Math.random() * 50 + 10, Math.random() * 10 + 10, true, color)));				spt.x = Math.random() * stage.stageWidth;				spt.y = Math.random() * stage.stageHeight;				this.addChild(spt);				_list.push(spt);			}		}				public function setRunning():void		{			this.addEventListener(Event.ENTER_FRAME, runEvent);			this.stage.addEventListener(KeyboardEvent.KEY_DOWN, _onKeyDown);			this.stage.addEventListener(KeyboardEvent.KEY_UP, _onKeyUp);		}				private function _onKeyDown(event:KeyboardEvent):void		{			trace(event.type, event.keyCode)			switch(event.keyCode)			{				case Keyboard.A:					_self.wallopx = -speed;					break;				case Keyboard.D:					_self.wallopx = speed;					break;				case Keyboard.W:					if (_self.isLanded()) 					{						_self.setThrust(30);					}					break;			}		}				private function _onKeyUp(event:KeyboardEvent):void		{			trace(event.type, event.keyCode)			if (event.keyCode == Keyboard.A||event.keyCode == Keyboard.D)			{				_self.wallopx = 0;			}		}				private function runEvent(event:Event):void		{			for each(var obj:BoxRegion in _list) 			{				obj.filters = null;			}			_self.endRender(_list);			if (_self.data.getPositionY() > stage.stageHeight) {				_self.data.setPositionY(0);			}			if (_self.data.getPositionX() > stage.stageWidth) {				_self.data.setPositionX(0);			}else if(_self.data.getPositionX() < 0){				_self.data.setPositionX(stage.stageWidth);			}		}				//end	}}